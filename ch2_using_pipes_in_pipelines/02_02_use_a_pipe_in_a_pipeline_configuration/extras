image: atlassian/default-image:4

pipelines:
  default:

    - step:
        name: Use an official Bitbucket pipe
        script:
          - pipe: atlassian/bitbucket-iac-scan:0.5.2
            variables:
              FILES_TO_SCAN_PATH: .
              SCAN_EXTRA_ARGS:
               - "--type=CloudFormation"

    - step:
        name: Use a pipe from Docker Hub
        condition:
          changesets:
            includePaths:
              - "skipper.txt"
        script:
          - pipe: docker://docker.io/hello-world:latest

    - step:
        name: Use a pipe from AWS Elastic Container Registry
        condition:
          changesets:
            includePaths:
              - "skipper.txt"
        script:
          - pipe: docker://public.ecr.aws/docker/library/hello-world:linux

